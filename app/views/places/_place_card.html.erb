<% building_count = place.building_analyses_in_place.count %>
<% styles = place.architectural_styles_summary.first(3) %>
<%= link_to place_path(place), class: "place-card", data: { region: region, name: place.name.downcase, buildings: building_count } do %>
  <% if place.best_representative_image.present? %>
    <div class="place-card-image">
      <img src="<%= place.best_representative_image %>" alt="<%= place.name %> architecture" loading="lazy" class="card-image">
      <div class="image-overlay"></div>
      <span class="place-card-badge"><%= building_count %> buildings</span>
    </div>
  <% end %>
  <div class="place-card-content">
    <h3><%= place.name %></h3>
    <% if styles.any? %>
      <div class="place-card-styles">
        <% styles.first(3).each do |style, _| %>
          <span class="style-pill"><%= style.gsub(/\s*\d+%$/, '') %></span>
        <% end %>
      </div>
    <% end %>
    <% if place.description.present? %>
      <p class="place-card-desc"><%= truncate(place.description, length: 120) %></p>
    <% end %>
    <div class="place-card-footer">
      <span class="building-count"><%= pluralize(building_count, 'building') %></span>
      <span class="explore-link">Explore <svg width="14" height="14" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
    </div>
  </div>
<% end %>
